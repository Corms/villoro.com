# --------------------------------------------------------------------------------------------------
# Basic metadata
# --------------------------------------------------------------------------------------------------
code: luigi
title: Luigi task scheduler
title_short: Luigi scheduler
date: "2019-12-24"
image: default.png
highlight: True

tags:
  - Python
  - Automation

tags_filter:
  - Python
  - Automation

# --------------------------------------------------------------------------------------------------
# Extra info. This will add a button with href to the url
# --------------------------------------------------------------------------------------------------
# link: 
#   text: Github
#   url: https://github.com/villoro/villoro_posts/tree/master/0028-pyspark_example


# --------------------------------------------------------------------------------------------------
# Content
# --------------------------------------------------------------------------------------------------
brief_markdown: |
  TODO

# image_head:
#   filename: spark.svg
#   caption: spark

content_markdown: |

  ## Table of Contents

  [TOC]

  ## 1. Why Luigi?

  ## 2. Installation


  ## 4. Runing airflow with supervisor

  If you want a process always runing and to be restarted on failure you should use **supervisor**.


  pip3 install supervisor

  sudo mkdir /var/log/luigi/

  sudo mkdir /var/lib/luigi-server/

  
  [program:luigid]
  command=/home/ubuntu/.local/bin/luigid
  stopsignal=QUIT
  stdout_logfile=/var/log/luigi/luigid.log
  stderr_logfile=/var/log/luigi/luigid.error.log
  autorestart=true
  user=ubuntu



  <div class="input">
    ~/run_luigi.sh
  </div>
  ```sh
  source /home/ubuntu/.bashrc

  cd /home/ubuntu/villoro_tasks/
  python3 src/master.py
  ```

  ```sh
  chmod +x /home/ubuntu/run_luigi.sh
  ```

  ```sh
  0 5 * * * /home/ubuntu/run_luigi.sh
  ```

